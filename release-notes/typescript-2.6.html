<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.35">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/png" sizes="32x32" href="/icon-48x48.png"><title>TypeScript 2.6 | TypeScript中文手册</title><meta name="description" content="TS中文手册">
    <link rel="modulepreload" href="/assets/app.0186264c.js"><link rel="modulepreload" href="/assets/typescript-2.6.html.02dc17ad.js"><link rel="modulepreload" href="/assets/typescript-2.6.html.de89d169.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/assets/style.b29aeafa.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/icon-512x512.png" alt="TypeScript中文手册"><span class="site-name can-hide">TypeScript中文手册</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="指南"><span class="title">指南</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="指南"><span class="title">指南</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>快速开始</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/get-started/ts-for-the-new-programmers" class="" aria-label="新手指南"><!--[--><!--]--> 新手指南 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/get-started/ts-for-js-programmers" class="" aria-label="JavaScript开发者"><!--[--><!--]--> JavaScript开发者 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/get-started/ts-for-oopers" class="" aria-label="Java/C 开发者"><!--[--><!--]--> Java/C 开发者 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/tutorials/typescript-in-5-minutes" class="" aria-label="5分钟上手"><!--[--><!--]--> 5分钟上手 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>在多个环境中使用TS</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/tutorials/asp.net-core" class="" aria-label="ASP.NET Core"><!--[--><!--]--> ASP.NET Core <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/tutorials/gulp" class="" aria-label="Gulp"><!--[--><!--]--> Gulp <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/tutorials/migrating-from-javascript" class="" aria-label="Migrating from JavaScript"><!--[--><!--]--> Migrating from JavaScript <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JS中支持TS的工具</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/javascript/type-checking-javascript-files" class="" aria-label="Type Checking JavaScript Files"><!--[--><!--]--> Type Checking JavaScript Files <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="TS编译配置"><span class="title">TS编译配置</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="TS编译配置"><span class="title">TS编译配置</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/project-config/tsconfig.json" class="" aria-label="什么是tsconfig.json"><!--[--><!--]--> 什么是tsconfig.json <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project-config/compiler-options-in-msbuild" class="" aria-label="MSBuild中的编译器选项"><!--[--><!--]--> MSBuild中的编译器选项 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project-config/compiler-options" class="" aria-label="compiler选项"><!--[--><!--]--> compiler选项 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project-config/integrating-with-build-tools" class="" aria-label="与构建工具集成"><!--[--><!--]--> 与构建工具集成 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project-config/configuring-watch" class="" aria-label="监听器配置"><!--[--><!--]--> 监听器配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project-config/nightly-builds" class="" aria-label="每日构建"><!--[--><!--]--> 每日构建 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="TS手册v2"><span class="title">TS手册v2</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="TS手册v2"><span class="title">TS手册v2</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>类型操作</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/handbook/generics" class="" aria-label="泛型"><!--[--><!--]--> 泛型 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/handbook-v2/type-manipulation/template-literal-types" class="" aria-label="Template Literal Types"><!--[--><!--]--> Template Literal Types <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><a href="/handbook/classes" class="" aria-label="Classes"><!--[--><!--]--> Classes <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Reference"><span class="title">Reference</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Reference"><span class="title">Reference</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/reference/utility-types" class="" aria-label="Utility Types"><!--[--><!--]--> Utility Types <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/decorators" class="" aria-label="Decorators"><!--[--><!--]--> Decorators <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/declaration-merging" class="" aria-label="Declaration Merging"><!--[--><!--]--> Declaration Merging <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/handbook/enums" class="" aria-label="Enums"><!--[--><!--]--> Enums <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/iterators-and-generators" class="" aria-label="Iterators and Generators"><!--[--><!--]--> Iterators and Generators <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/jsx" class="" aria-label="JSX"><!--[--><!--]--> JSX <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/mixins" class="" aria-label="Mixins"><!--[--><!--]--> Mixins <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/modules" class="" aria-label="Modules"><!--[--><!--]--> Modules <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/module-resolution" class="" aria-label="Module Resolution"><!--[--><!--]--> Module Resolution <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/namespaces.html" class="" aria-label="Namespaces"><!--[--><!--]--> Namespaces <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/namespaces-and-modules" class="" aria-label="Namespaces and Modules"><!--[--><!--]--> Namespaces and Modules <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/symbols" class="" aria-label="Symbols"><!--[--><!--]--> Symbols <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/triple-slash-directives" class="" aria-label="Triple-Slash Directives"><!--[--><!--]--> Triple-Slash Directives <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/type-compatibility" class="" aria-label="Type Compatibility"><!--[--><!--]--> Type Compatibility <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/type-inference" class="" aria-label="Type Inference"><!--[--><!--]--> Type Inference <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/variable-declarations" class="" aria-label="Variable Declaration"><!--[--><!--]--> Variable Declaration <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="发布记录"><span class="title">发布记录</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="发布记录"><span class="title">发布记录</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/release-notes/typescript-4.5" class="" aria-label="typescript-4.5"><!--[--><!--]--> typescript-4.5 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-4.4" class="" aria-label="typescript-4.4"><!--[--><!--]--> typescript-4.4 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-4.3" class="" aria-label="typescript-4.3"><!--[--><!--]--> typescript-4.3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-4.2" class="" aria-label="typescript-4.2"><!--[--><!--]--> typescript-4.2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-4.1" class="" aria-label="typescript-4.1"><!--[--><!--]--> typescript-4.1 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-4.0" class="" aria-label="typescript-4.0"><!--[--><!--]--> typescript-4.0 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.9" class="" aria-label="typescript-3.9"><!--[--><!--]--> typescript-3.9 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.8" class="" aria-label="typescript-3.8"><!--[--><!--]--> typescript-3.8 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.7" class="" aria-label="typescript-3.7"><!--[--><!--]--> typescript-3.7 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.6" class="" aria-label="typescript-3.6"><!--[--><!--]--> typescript-3.6 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.5" class="" aria-label="typescript-3.5"><!--[--><!--]--> typescript-3.5 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.4" class="" aria-label="typescript-3.4"><!--[--><!--]--> typescript-3.4 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.3" class="" aria-label="typescript-3.3"><!--[--><!--]--> typescript-3.3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.2" class="" aria-label="typescript-3.2"><!--[--><!--]--> typescript-3.2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.1" class="" aria-label="typescript-3.1"><!--[--><!--]--> typescript-3.1 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.0" class="" aria-label="typescript-3.0"><!--[--><!--]--> typescript-3.0 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.9" class="" aria-label="typescript-2.9"><!--[--><!--]--> typescript-2.9 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.8" class="" aria-label="typescript-2.8"><!--[--><!--]--> typescript-2.8 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.7" class="" aria-label="typescript-2.7"><!--[--><!--]--> typescript-2.7 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.6" class="router-link-active" aria-label="typescript-2.6"><!--[--><!--]--> typescript-2.6 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.5" class="" aria-label="typescript-2.5"><!--[--><!--]--> typescript-2.5 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.4" class="" aria-label="typescript-2.4"><!--[--><!--]--> typescript-2.4 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.3" class="" aria-label="typescript-2.3"><!--[--><!--]--> typescript-2.3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.2" class="" aria-label="typescript-2.2"><!--[--><!--]--> typescript-2.2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.1" class="" aria-label="typescript-2.1"><!--[--><!--]--> typescript-2.1 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.0" class="" aria-label="typescript-2.0"><!--[--><!--]--> typescript-2.0 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-1.8" class="" aria-label="typescript-1.8"><!--[--><!--]--> typescript-1.8 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-1.7" class="" aria-label="typescript-1.7"><!--[--><!--]--> typescript-1.7 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-1.6" class="" aria-label="typescript-1.6"><!--[--><!--]--> typescript-1.6 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-1.5" class="" aria-label="typescript-1.5"><!--[--><!--]--> typescript-1.5 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-1.4" class="" aria-label="typescript-1.4"><!--[--><!--]--> typescript-1.4 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-1.3" class="" aria-label="typescript-1.3"><!--[--><!--]--> typescript-1.3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-1.1" class="" aria-label="typescript-1.1"><!--[--><!--]--> typescript-1.1 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/Mario34/typescript-zh-cn" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="指南"><span class="title">指南</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="指南"><span class="title">指南</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>快速开始</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/get-started/ts-for-the-new-programmers" class="" aria-label="新手指南"><!--[--><!--]--> 新手指南 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/get-started/ts-for-js-programmers" class="" aria-label="JavaScript开发者"><!--[--><!--]--> JavaScript开发者 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/get-started/ts-for-oopers" class="" aria-label="Java/C 开发者"><!--[--><!--]--> Java/C 开发者 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/tutorials/typescript-in-5-minutes" class="" aria-label="5分钟上手"><!--[--><!--]--> 5分钟上手 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>在多个环境中使用TS</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/tutorials/asp.net-core" class="" aria-label="ASP.NET Core"><!--[--><!--]--> ASP.NET Core <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/tutorials/gulp" class="" aria-label="Gulp"><!--[--><!--]--> Gulp <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/tutorials/migrating-from-javascript" class="" aria-label="Migrating from JavaScript"><!--[--><!--]--> Migrating from JavaScript <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JS中支持TS的工具</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/javascript/type-checking-javascript-files" class="" aria-label="Type Checking JavaScript Files"><!--[--><!--]--> Type Checking JavaScript Files <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="TS编译配置"><span class="title">TS编译配置</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="TS编译配置"><span class="title">TS编译配置</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/project-config/tsconfig.json" class="" aria-label="什么是tsconfig.json"><!--[--><!--]--> 什么是tsconfig.json <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project-config/compiler-options-in-msbuild" class="" aria-label="MSBuild中的编译器选项"><!--[--><!--]--> MSBuild中的编译器选项 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project-config/compiler-options" class="" aria-label="compiler选项"><!--[--><!--]--> compiler选项 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project-config/integrating-with-build-tools" class="" aria-label="与构建工具集成"><!--[--><!--]--> 与构建工具集成 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project-config/configuring-watch" class="" aria-label="监听器配置"><!--[--><!--]--> 监听器配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/project-config/nightly-builds" class="" aria-label="每日构建"><!--[--><!--]--> 每日构建 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="TS手册v2"><span class="title">TS手册v2</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="TS手册v2"><span class="title">TS手册v2</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>类型操作</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/handbook/generics" class="" aria-label="泛型"><!--[--><!--]--> 泛型 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/handbook-v2/type-manipulation/template-literal-types" class="" aria-label="Template Literal Types"><!--[--><!--]--> Template Literal Types <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><a href="/handbook/classes" class="" aria-label="Classes"><!--[--><!--]--> Classes <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Reference"><span class="title">Reference</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Reference"><span class="title">Reference</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/reference/utility-types" class="" aria-label="Utility Types"><!--[--><!--]--> Utility Types <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/decorators" class="" aria-label="Decorators"><!--[--><!--]--> Decorators <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/declaration-merging" class="" aria-label="Declaration Merging"><!--[--><!--]--> Declaration Merging <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/handbook/enums" class="" aria-label="Enums"><!--[--><!--]--> Enums <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/iterators-and-generators" class="" aria-label="Iterators and Generators"><!--[--><!--]--> Iterators and Generators <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/jsx" class="" aria-label="JSX"><!--[--><!--]--> JSX <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/mixins" class="" aria-label="Mixins"><!--[--><!--]--> Mixins <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/modules" class="" aria-label="Modules"><!--[--><!--]--> Modules <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/module-resolution" class="" aria-label="Module Resolution"><!--[--><!--]--> Module Resolution <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/namespaces.html" class="" aria-label="Namespaces"><!--[--><!--]--> Namespaces <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/namespaces-and-modules" class="" aria-label="Namespaces and Modules"><!--[--><!--]--> Namespaces and Modules <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/symbols" class="" aria-label="Symbols"><!--[--><!--]--> Symbols <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/triple-slash-directives" class="" aria-label="Triple-Slash Directives"><!--[--><!--]--> Triple-Slash Directives <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/type-compatibility" class="" aria-label="Type Compatibility"><!--[--><!--]--> Type Compatibility <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/type-inference" class="" aria-label="Type Inference"><!--[--><!--]--> Type Inference <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/reference/variable-declarations" class="" aria-label="Variable Declaration"><!--[--><!--]--> Variable Declaration <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="发布记录"><span class="title">发布记录</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="发布记录"><span class="title">发布记录</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/release-notes/typescript-4.5" class="" aria-label="typescript-4.5"><!--[--><!--]--> typescript-4.5 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-4.4" class="" aria-label="typescript-4.4"><!--[--><!--]--> typescript-4.4 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-4.3" class="" aria-label="typescript-4.3"><!--[--><!--]--> typescript-4.3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-4.2" class="" aria-label="typescript-4.2"><!--[--><!--]--> typescript-4.2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-4.1" class="" aria-label="typescript-4.1"><!--[--><!--]--> typescript-4.1 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-4.0" class="" aria-label="typescript-4.0"><!--[--><!--]--> typescript-4.0 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.9" class="" aria-label="typescript-3.9"><!--[--><!--]--> typescript-3.9 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.8" class="" aria-label="typescript-3.8"><!--[--><!--]--> typescript-3.8 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.7" class="" aria-label="typescript-3.7"><!--[--><!--]--> typescript-3.7 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.6" class="" aria-label="typescript-3.6"><!--[--><!--]--> typescript-3.6 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.5" class="" aria-label="typescript-3.5"><!--[--><!--]--> typescript-3.5 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.4" class="" aria-label="typescript-3.4"><!--[--><!--]--> typescript-3.4 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.3" class="" aria-label="typescript-3.3"><!--[--><!--]--> typescript-3.3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.2" class="" aria-label="typescript-3.2"><!--[--><!--]--> typescript-3.2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.1" class="" aria-label="typescript-3.1"><!--[--><!--]--> typescript-3.1 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-3.0" class="" aria-label="typescript-3.0"><!--[--><!--]--> typescript-3.0 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.9" class="" aria-label="typescript-2.9"><!--[--><!--]--> typescript-2.9 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.8" class="" aria-label="typescript-2.8"><!--[--><!--]--> typescript-2.8 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.7" class="" aria-label="typescript-2.7"><!--[--><!--]--> typescript-2.7 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.6" class="router-link-active" aria-label="typescript-2.6"><!--[--><!--]--> typescript-2.6 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.5" class="" aria-label="typescript-2.5"><!--[--><!--]--> typescript-2.5 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.4" class="" aria-label="typescript-2.4"><!--[--><!--]--> typescript-2.4 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.3" class="" aria-label="typescript-2.3"><!--[--><!--]--> typescript-2.3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.2" class="" aria-label="typescript-2.2"><!--[--><!--]--> typescript-2.2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.1" class="" aria-label="typescript-2.1"><!--[--><!--]--> typescript-2.1 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-2.0" class="" aria-label="typescript-2.0"><!--[--><!--]--> typescript-2.0 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-1.8" class="" aria-label="typescript-1.8"><!--[--><!--]--> typescript-1.8 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-1.7" class="" aria-label="typescript-1.7"><!--[--><!--]--> typescript-1.7 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-1.6" class="" aria-label="typescript-1.6"><!--[--><!--]--> typescript-1.6 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-1.5" class="" aria-label="typescript-1.5"><!--[--><!--]--> typescript-1.5 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-1.4" class="" aria-label="typescript-1.4"><!--[--><!--]--> typescript-1.4 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-1.3" class="" aria-label="typescript-1.3"><!--[--><!--]--> typescript-1.3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/release-notes/typescript-1.1" class="" aria-label="typescript-1.1"><!--[--><!--]--> typescript-1.1 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/Mario34/typescript-zh-cn" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">TypeScript 2.6 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/release-notes/typescript-2.6.html#严格函数类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="严格函数类型"><!--[--><!--]--> 严格函数类型 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/release-notes/typescript-2.6.html#例子" class="router-link-active router-link-exact-active sidebar-item" aria-label="例子"><!--[--><!--]--> 例子 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/release-notes/typescript-2.6.html#注意" class="router-link-active router-link-exact-active sidebar-item" aria-label="注意："><!--[--><!--]--> 注意： <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/release-notes/typescript-2.6.html#缓存模块中的标签模板对象" class="router-link-active router-link-exact-active sidebar-item" aria-label="缓存模块中的标签模板对象"><!--[--><!--]--> 缓存模块中的标签模板对象 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/release-notes/typescript-2.6.html#例子-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="例子"><!--[--><!--]--> 例子 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/release-notes/typescript-2.6.html#本地化的命令行诊断消息" class="router-link-active router-link-exact-active sidebar-item" aria-label="本地化的命令行诊断消息"><!--[--><!--]--> 本地化的命令行诊断消息 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/release-notes/typescript-2.6.html#例子-2" class="router-link-active router-link-exact-active sidebar-item" aria-label="例子"><!--[--><!--]--> 例子 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/release-notes/typescript-2.6.html#通过-ts-ignore-注释隐藏-ts-文件中的错误" class="router-link-active router-link-exact-active sidebar-item" aria-label="通过 &#39;// @ts-ignore&#39; 注释隐藏 .ts 文件中的错误"><!--[--><!--]--> 通过 &#39;// @ts-ignore&#39; 注释隐藏 .ts 文件中的错误 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/release-notes/typescript-2.6.html#例子-3" class="router-link-active router-link-exact-active sidebar-item" aria-label="例子"><!--[--><!--]--> 例子 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/release-notes/typescript-2.6.html#更快的-tsc-watch" class="router-link-active router-link-exact-active sidebar-item" aria-label="更快的 tsc --watch"><!--[--><!--]--> 更快的 tsc --watch <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/release-notes/typescript-2.6.html#只写的引用现在会被标记未使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="只写的引用现在会被标记未使用"><!--[--><!--]--> 只写的引用现在会被标记未使用 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/release-notes/typescript-2.6.html#例子-4" class="router-link-active router-link-exact-active sidebar-item" aria-label="例子"><!--[--><!--]--> 例子 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/release-notes/typescript-2.6.html#例子-5" class="router-link-active router-link-exact-active sidebar-item" aria-label="例子"><!--[--><!--]--> 例子 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="typescript-2-6" tabindex="-1"><a class="header-anchor" href="#typescript-2-6" aria-hidden="true">#</a> TypeScript 2.6</h1><h2 id="严格函数类型" tabindex="-1"><a class="header-anchor" href="#严格函数类型" aria-hidden="true">#</a> 严格函数类型</h2><p>TypeScript 2.6引入了新的类型检查选项，<code>--strictFunctionTypes</code>。<code>--strictFunctionTypes</code>选项是<code>--strict</code>系列选项之一，也就是说 <code>--strict</code>模式下它默认是启用的。你可以通过在命令行或tsconfig.json中设置<code>--strictFunctionTypes false</code>来单独禁用它。</p><p><code>--strictFunctionTypes</code>启用时，函数类型参数的检查是_抗变（contravariantly）_而非_双变（bivariantly）_的。关于变体 (variance) 对于函数类型意义的相关背景，请查看<a href="https://www.stephanboyer.com/post/132/what-are-covariance-and-contravariance" target="_blank" rel="noopener noreferrer">协变（covariance）和抗变（contravariance）是什么？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><p>这一更严格的检查应用于除方法或构造函数声明以外的所有函数类型。方法被专门排除在外是为了确保带泛型的类和接口（如<code>Array&lt;T&gt;</code>）总体上仍然保持协变。</p><p>考虑下面这个 Animal 是 Dog 和 Cat 的父类型的例子：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">let</span> <span class="token function-variable function">f1</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> Animal<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> <span class="token function-variable function">f2</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> Dog<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> <span class="token function-variable function">f3</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> Cat<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
f1 <span class="token operator">=</span> f2<span class="token punctuation">;</span>  <span class="token comment">// 启用 --strictFunctionTypes 时错误</span>
f2 <span class="token operator">=</span> f1<span class="token punctuation">;</span>  <span class="token comment">// 正确</span>
f2 <span class="token operator">=</span> f3<span class="token punctuation">;</span>  <span class="token comment">// 错误</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>第一个赋值语句在默认的类型检查模式中是允许的，但是在严格函数类型模式下会被标记错误。 通俗地讲，默认模式允许这么赋值，因为它_可能是_合理的，而严格函数类型模式将它标记为错误，因为它不能_被证明_合理。 任何一种模式中，第三个赋值都是错误的，因为它_永远不_合理。</p><p>用另一种方式来描述这个例子则是，默认类型检查模式中<code>T</code>在类型<code>(x: T) =&gt; void</code>是_双变的_（也即协变_或_抗变），但在严格函数类型模式中<code>T</code>是_抗变_的。</p><h3 id="例子" tabindex="-1"><a class="header-anchor" href="#例子" aria-hidden="true">#</a> 例子</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Comparer<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token function-variable function">compare</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">let</span> animalComparer<span class="token operator">:</span> Comparer<span class="token operator">&lt;</span>Animal<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> dogComparer<span class="token operator">:</span> Comparer<span class="token operator">&lt;</span>Dog<span class="token operator">&gt;</span><span class="token punctuation">;</span>

animalComparer <span class="token operator">=</span> dogComparer<span class="token punctuation">;</span>  <span class="token comment">// 错误</span>
dogComparer <span class="token operator">=</span> animalComparer<span class="token punctuation">;</span>  <span class="token comment">// 正确</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>现在第一个赋值是错误的。更明确地说，<code>Comparer&lt;T&gt;</code>中的<code>T</code>因为仅在函数类型参数的位置被使用，是抗变的。</p><p>另外，注意尽管有的语言（比如C#和Scala）要求变体标注（variance annotations）（<code>out</code>/<code>in</code> 或 <code>+</code>/<code>-</code>），而由于TypeScript的结构化类型系统，它的变体是由泛型中的类型参数的实际使用自然得出的。</p><h3 id="注意" tabindex="-1"><a class="header-anchor" href="#注意" aria-hidden="true">#</a> 注意：</h3><p>启用<code>--strictFunctionTypes</code>时，如果<code>compare</code>被声明为方法，则第一个赋值依然是被允许的。 更明确的说，<code>Comparer&lt;T&gt;</code>中的<code>T</code>因为仅在方法参数的位置被使用所以是双变的。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Comparer<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">let</span> animalComparer<span class="token operator">:</span> Comparer<span class="token operator">&lt;</span>Animal<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> dogComparer<span class="token operator">:</span> Comparer<span class="token operator">&lt;</span>Dog<span class="token operator">&gt;</span><span class="token punctuation">;</span>

animalComparer <span class="token operator">=</span> dogComparer<span class="token punctuation">;</span>  <span class="token comment">// 正确，因为双变</span>
dogComparer <span class="token operator">=</span> animalComparer<span class="token punctuation">;</span>  <span class="token comment">// 正确</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>TypeScript 2.6 还改进了与抗变位置相关的类型推导：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">combine</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token operator">...</span>funcs<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function-variable function">x</span><span class="token operator">:</span> ）<span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> f <span class="token keyword">of</span> funcs<span class="token punctuation">)</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">animalFunc</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Animal<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">dogFunc</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Dog<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">let</span> combined <span class="token operator">=</span> <span class="token function">combine</span><span class="token punctuation">(</span>animalFunc，dogFunc<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// (x: Dog) =&gt; void</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>这上面所有<code>T</code>的推断都来自抗变的位置，由此我们得出<code>T</code>的_最普遍子类型_。 这与从协变位置推导出的结果恰恰相反，从协变位置我们得出的是_最普遍超类型_。</p><h2 id="缓存模块中的标签模板对象" tabindex="-1"><a class="header-anchor" href="#缓存模块中的标签模板对象" aria-hidden="true">#</a> 缓存模块中的标签模板对象</h2><p>TypeScript 2.6修复了标签字符串模板的输出，以更好地遵循ECMAScript标准。 根据<a href="https://tc39.github.io/ecma262/#sec-gettemplateobject" target="_blank" rel="noopener noreferrer">ECMAScript 标准<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，每一次获取模板标签的值时，应该将_同一个_模板字符串数组对象 (同一个 <code>TemplateStringArray</code>) 作为第一个参数传递。 在 TypeScript 2.6 之前，每一次生成的都是全新的模板对象。 虽然字符串的内容是一样的，这样的输出会影响通过识别字符串来实现缓存失效的库，比如 <a href="https://github.com/PolymerLabs/lit-html/issues/58" target="_blank" rel="noopener noreferrer">lit-html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><h3 id="例子-1" tabindex="-1"><a class="header-anchor" href="#例子-1" aria-hidden="true">#</a> 例子</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">id</span><span class="token punctuation">(</span>x<span class="token operator">:</span> TemplateStringsArray<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> id<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello world</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TS 2.6 为 true</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>编译后的代码：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> __makeTemplateObject <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>__makeTemplateObject<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">cooked<span class="token punctuation">,</span> raw</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span>defineProperty<span class="token punctuation">)</span> <span class="token punctuation">{</span> Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>cooked<span class="token punctuation">,</span> <span class="token string">&quot;raw&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> raw <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> cooked<span class="token punctuation">.</span>raw <span class="token operator">=</span> raw<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cooked<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">id</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> _a<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">id</span><span class="token punctuation">(</span>_a <span class="token operator">||</span> <span class="token punctuation">(</span>_a <span class="token operator">=</span> <span class="token function">__makeTemplateObject</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><blockquote><p>注意：这一改变引入了新的工具函数，<code>__makeTemplateObject</code>; 如果你在搭配使用<code>--importHelpers</code>和<a href="https://github.com/Microsoft/tslib" target="_blank" rel="noopener noreferrer"><code>tslib</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，需要更新到 1.8 或更高版本。</p></blockquote><h2 id="本地化的命令行诊断消息" tabindex="-1"><a class="header-anchor" href="#本地化的命令行诊断消息" aria-hidden="true">#</a> 本地化的命令行诊断消息</h2><p>TypeScript 2.6 npm包加入了13种语言的诊断消息本地化版本。 命令行中本地化消息会在使用<code>--locale</code>选项时显示。</p><h3 id="例子-2" tabindex="-1"><a class="header-anchor" href="#例子-2" aria-hidden="true">#</a> 例子</h3><p>俄语显示的错误消息：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>c:<span class="token punctuation">\</span>ts<span class="token operator">&gt;</span>tsc --v
Version <span class="token number">2.6</span>.1

c:<span class="token punctuation">\</span>ts<span class="token operator">&gt;</span>tsc --locale ru --pretty c:<span class="token punctuation">\</span>test<span class="token punctuation">\</span>a.ts

<span class="token punctuation">..</span>/test/a.ts<span class="token punctuation">(</span><span class="token number">1,5</span><span class="token punctuation">)</span>: error TS2322: Тип <span class="token string">&quot;&quot;</span>string<span class="token string">&quot;&quot;</span> не может быть назначен для типа <span class="token string">&quot;number&quot;</span><span class="token builtin class-name">.</span>

<span class="token number">1</span> var x: number <span class="token operator">=</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">;</span>
      ~
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>中文显示的帮助信息：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>PS C:<span class="token punctuation">\</span>ts<span class="token operator">&gt;</span> tsc --v
Version <span class="token number">2.6</span>.1

PS C:<span class="token punctuation">\</span>ts<span class="token operator">&gt;</span> tsc --locale zh-cn
版本 <span class="token number">2.6</span>.1
语法：tsc <span class="token punctuation">[</span>选项<span class="token punctuation">]</span> <span class="token punctuation">[</span>文件 <span class="token punctuation">..</span>.<span class="token punctuation">]</span>

示例：tsc hello.ts
    tsc --outFile file.js file.ts
    tsc @args.txt

选项：
 -h, --help                    打印此消息。
 --all                         显示所有编译器选项。
 -v, --version                 打印编译器的版本。
 --init                        初始化 TypeScript 项目并创建 tsconfig.json 文件。
 -p 文件或目录, --project 文件或目录     编译给定了其配置文件路径或带 <span class="token string">&quot;tsconfig.json&quot;</span> 的文件夹路径的项目。
 --pretty                      使用颜色和上下文风格化错误和消息<span class="token punctuation">(</span>实验<span class="token punctuation">)</span>。
 -w, --watch                   监视输入文件。
 -t 版本, --target 版本            指定 ECMAScript 目标版本：<span class="token string">&quot;ES3&quot;</span><span class="token punctuation">(</span>默认<span class="token punctuation">)</span>、<span class="token string">&quot;ES5&quot;</span>、<span class="token string">&quot;ES2015&quot;</span>、<span class="token string">&quot;ES2016&quot;</span>、<span class="token string">&quot;ES2017&quot;</span> 或 <span class="token string">&quot;ESNEXT&quot;</span>。
 -m 种类, --module 种类            指定模块代码生成：<span class="token string">&quot;none&quot;</span>、<span class="token string">&quot;commonjs&quot;</span>、<span class="token string">&quot;amd&quot;</span>、<span class="token string">&quot;system&quot;</span>、<span class="token string">&quot;umd&quot;</span>、<span class="token string">&quot;es2015&quot;</span>或 <span class="token string">&quot;ESNext&quot;</span>。
 --lib                         指定要在编译中包括的库文件:
                                 <span class="token string">&#39;es5&#39;</span> <span class="token string">&#39;es6&#39;</span> <span class="token string">&#39;es2015&#39;</span> <span class="token string">&#39;es7&#39;</span> <span class="token string">&#39;es2016&#39;</span> <span class="token string">&#39;es2017&#39;</span> <span class="token string">&#39;esnext&#39;</span> <span class="token string">&#39;dom&#39;</span> <span class="token string">&#39;dom.iterable&#39;</span> <span class="token string">&#39;webworker&#39;</span> <span class="token string">&#39;scripthost&#39;</span> <span class="token string">&#39;es2015.core&#39;</span> <span class="token string">&#39;es2015.collection&#39;</span> <span class="token string">&#39;es2015.generator&#39;</span> <span class="token string">&#39;es2015.iterable&#39;</span> <span class="token string">&#39;es2015.promise&#39;</span> <span class="token string">&#39;es2015.proxy&#39;</span> <span class="token string">&#39;es2015.reflect&#39;</span> <span class="token string">&#39;es2015.symbol&#39;</span> <span class="token string">&#39;es2015.symbol.wellknown&#39;</span> <span class="token string">&#39;es2016.array.include&#39;</span> <span class="token string">&#39;es2017.object&#39;</span> <span class="token string">&#39;es2017.sharedmemory&#39;</span> <span class="token string">&#39;es2017.string&#39;</span> <span class="token string">&#39;es2017.intl&#39;</span> <span class="token string">&#39;esnext.asynciterable&#39;</span>
 --allowJs                     允许编译 JavaScript 文件。
 --jsx 种类                      指定 JSX 代码生成：<span class="token string">&quot;preserve&quot;</span>、<span class="token string">&quot;react-native&quot;</span> 或 <span class="token string">&quot;react&quot;</span>。 -d, --declaration             生成相应的 <span class="token string">&quot;.d.ts&quot;</span> 文件。
 --sourceMap                   生成相应的 <span class="token string">&quot;.map&quot;</span> 文件。
 --outFile 文件                  连接输出并将其发出到单个文件。
 --outDir 目录                   将输出结构重定向到目录。
 --removeComments              请勿将注释发出到输出。
 --noEmit                      请勿发出输出。
 --strict                      启用所有严格类型检查选项。
 --noImplicitAny               对具有隐式 <span class="token string">&quot;any&quot;</span> 类型的表达式和声明引发错误。
 --strictNullChecks            启用严格的 NULL 检查。
 --strictFunctionTypes         对函数类型启用严格检查。
 --noImplicitThis              在带隐式<span class="token string">&quot;any&quot;</span> 类型的 <span class="token string">&quot;this&quot;</span> 表达式上引发错误。
 --alwaysStrict                以严格模式进行分析，并为每个源文件发出 <span class="token string">&quot;use strict&quot;</span> 指令。
 --noUnusedLocals              报告未使用的局部变量上的错误。
 --noUnusedParameters          报告未使用的参数上的错误。
 --noImplicitReturns           在函数中的所有代码路径并非都返回值时报告错误。
 --noFallthroughCasesInSwitch  报告 switch 语句中遇到 fallthrough 情况的错误。
 --types                       要包含在编译中类型声明文件。
 @<span class="token operator">&lt;</span>文件<span class="token operator">&gt;</span>                         从文件插入命令行选项和文件。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h2 id="通过-ts-ignore-注释隐藏-ts-文件中的错误" tabindex="-1"><a class="header-anchor" href="#通过-ts-ignore-注释隐藏-ts-文件中的错误" aria-hidden="true">#</a> 通过 &#39;// @ts-ignore&#39; 注释隐藏 .ts 文件中的错误</h2><p>TypeScript 2.6支持在.ts文件中通过在报错一行上方使用<code>// @ts-ignore</code>来忽略错误。</p><h3 id="例子-3" tabindex="-1"><a class="header-anchor" href="#例子-3" aria-hidden="true">#</a> 例子</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// @ts-ignore：无法被执行的代码的错误</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>// @ts-ignore</code>注释会忽略下一行中产生的所有错误。 建议实践中在<code>@ts-ignore</code>之后添加相关提示，解释忽略了什么错误。</p><p>请注意，这个注释仅会隐藏报错，并且我们建议你_极少_使用这一注释。</p><h2 id="更快的-tsc-watch" tabindex="-1"><a class="header-anchor" href="#更快的-tsc-watch" aria-hidden="true">#</a> 更快的 <code>tsc --watch</code></h2><p>TypeScript 2.6 带来了更快的<code>--watch</code>实现。 新版本优化了使用ES模块的代码的生成和检查。 在一个模块文件中检测到的改变_只_会使改变的模块，以及依赖它的文件被重新生成，而不再是整个项目。 有大量文件的项目应该从这一改变中获益最多。</p><p>这一新的实现也为tsserver中的监听带来了性能提升。 监听逻辑被完全重写以更快响应改变事件。</p><h2 id="只写的引用现在会被标记未使用" tabindex="-1"><a class="header-anchor" href="#只写的引用现在会被标记未使用" aria-hidden="true">#</a> 只写的引用现在会被标记未使用</h2><p>TypeScript 2.6加入了修正的<code>--noUnusedLocals</code>和<code>--noUnusedParameters</code><a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html" target="_blank" rel="noopener noreferrer">编译选项<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>实现。 只被写但从没有被读的声明现在会被标记未使用。</p><h3 id="例子-4" tabindex="-1"><a class="header-anchor" href="#例子-4" aria-hidden="true">#</a> 例子</h3><p>下面<code>n</code>和<code>m</code>都会被标记为未使用，因为它们的值从未被_读取_。之前 TypeScript 只会检查它们的值是否被_引用_。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> m<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>另外仅被自己内部调用的函数也会被认为是未使用的。</p><h3 id="例子-5" tabindex="-1"><a class="header-anchor" href="#例子-5" aria-hidden="true">#</a> 例子</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 错误：&#39;f&#39; 被声明，但它的值从未被使用</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/Mario34/typescript-zh-cn/edit/dev/zh/release-notes/typescript-2.6.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页"><!--[--><!--]--> 编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: zhl.mario34@outlook.com">Mario34</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.0186264c.js" defer></script>
  </body>
</html>
